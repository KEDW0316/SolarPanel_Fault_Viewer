{% extends 'ortho_viewer/base.html' %}
{% load static %}
{% block content %}

<!-- Custom styles for this template-->
<link href="{% static 'css/orthoimage-fault.css' %}" rel="stylesheet">

<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class=" h3 mb-0 text-gray-800">{{orthoimage.title}}</h1>
    <a href="{% url 'faultform' pk=orthoimage.pk %}"
        class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
            class="fas fa-download fa-sm text-white-50"></i> 고장위치 추가</a>
</div>

<body>
    <div style="text-align : center;">

        <div id="orthoimage-wrapper">
            <img id="orthoimage" src="{{ orthoimage.image.url }}" width="800px" alt="" />

            <!-- Marking on Orthoimage -->
            {% for file in panelfault %}
            <style>
                #faultmark{{file.id}}{
                    width:3%;
                    position:absolute;
                    left :calc({{file.px_x}}%);
                    top : calc({{file.px_y}}%);
                }
            </style>
            <a href="#myModal{{file.id}}"><img id="faultmark{{file.id}}" src={% static 'img/pin2.svg' %}
                    onclick=fault_detail({{file.id}})>
                <script src="https://code.jquery.com/jquery-latest.js"></script>

                <script type="text/javascript">
                    function fault_detail(file_id) {
                        $('#myModal' + file_id).show();
                    }
                    //팝업 Close 기능
                    function close_pop(file_id) {
                        $('#myModal' + file_id).hide();
                    };

                </script>
            </a>
            {% endfor %}
            <!-- End Marking on Ortho image -->
        </div>

        <!-- Create Modal Popup -->
        {% for file in panelfault %}

        <div id="myModal{{file.id}}" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <div id="modal-imagess">
                <div id="modal-images">
                    <img id="modal-orthoimage" src="{{ orthoimage.image.url }}" width=700px" alt="" style="float:left; margin:auto; padding-top: 30px; padding-left: 30px;" />
                    <style>
                    #modal-faultmark{{file.id}}{
                    position:absolute;
                    left :calc({{file.px_x}}%);
                    top : calc({{file.px_y}}%);
                    } 
                    </style>
                <img id="modal-faultmark{{file.id}}" src={% static 'img/pin2.svg' %} width="5%" height="5%">
                </div>
                 
                        <img id="modal_fault_image" src="{{ file.fault_image.url }}" width="600px" alt="" style="float : right;margin:auto;  padding-top: 150px; padding-right: 30px;" />
                    </div>
                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span
                                style="font-size: 24pt;">고장 유형 : {% if file.id|divisibleby:2 %}Hot Spot{% else %}Bypass Diode{% endif %}</span></b></span></p>

                <p><br /></p>
                <div style="cursor:pointer;background-color:#DDDDDD;text-align: center;padding-bottom: 10px;padding-top: 10px;"
                    onClick="close_pop({{file.id}});">
                    <span class="pop_bt" style="font-size: 13pt;">
                        닫기
                    </span>
                </div>
            </div>

        </div>
        {% endfor %}

        <!--End Modal-->
        <!-- </div> -->
    </div>
</body>
{% endblock content %}